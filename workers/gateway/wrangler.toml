name = "mauntic-gateway"
compatibility_date = "2026-02-01"
compatibility_flags = ["nodejs_compat"]
main = "src/index.ts"
workers_dev = true

[[routes]]
pattern = "zeluto.com"
custom_domain = true

[[routes]]
pattern = "www.zeluto.com"
custom_domain = true

[[kv_namespaces]]
binding = "KV"
id = "107300e1a7004921b6b4fc22d098af9a"

[[hyperdrive]]
binding = "DB"
id = "72ed37f34f16429088564b927eb093bc"
localConnectionString = "postgresql://neondb_owner:npg_8KTCgZUb1Dvl@ep-jolly-pine-ai35q07s-pooler.c-4.us-east-1.aws.neon.tech/neondb?sslmode=require"

[vars]
APP_DOMAIN = "zeluto.com"
STATIC_BASE_URL = "/assets"

[env.preview]
  [env.preview.vars]
  APP_DOMAIN = "staging.zeluto.com"
  STATIC_BASE_URL = "https://assets-staging.zeluto.com"

[env.production]
  [env.production.vars]
  APP_DOMAIN = "zeluto.com"
  STATIC_BASE_URL = "https://assets.zeluto.com"

[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "RateLimiter"

[[durable_objects.bindings]]
name = "TENANT_CACHE"
class_name = "TenantContextDurableObject"
script_name = "mauntic-tenant-cache"

[[migrations]]
tag = "v1"

# Service Bindings
[[services]]
binding = "IDENTITY"
service = "mauntic-identity"

[[services]]
binding = "IDENTITY_DISPATCH"
service = "mauntic-identity"

[[services]]
binding = "BILLING"
service = "mauntic-billing"

[[services]]
binding = "BILLING_DISPATCH"
service = "mauntic-billing"

[[services]]
binding = "CRM"
service = "mauntic-crm"

[[services]]
binding = "CRM_DISPATCH"
service = "mauntic-crm"

[[r2_buckets]]
binding = "STATIC_ASSETS"
bucket_name = "mauntic-static-assets"
preview_bucket_name = "mauntic-static-assets-dev"

[[analytics_engine_datasets]]
binding = "LOGS_DATASET"
dataset = "mauntic_logs"

[[services]]
binding = "JOURNEY"
service = "mauntic-journey"

[[services]]
binding = "DELIVERY"
service = "mauntic-delivery"

[[services]]
binding = "DELIVERY_DISPATCH"
service = "mauntic-delivery"

[[services]]
binding = "CAMPAIGN"
service = "mauntic-campaign"

[[services]]
binding = "CONTENT"
service = "mauntic-content"

[[services]]
binding = "ANALYTICS"
service = "mauntic-analytics"

[[services]]
binding = "ANALYTICS_DISPATCH"
service = "mauntic-analytics"

[[services]]
binding = "INTEGRATIONS"
service = "mauntic-integrations"

[[services]]
binding = "LEAD_INTELLIGENCE"
service = "mauntic-lead-intelligence"

[[services]]
binding = "SCORING"
service = "mauntic-scoring"

[[services]]
binding = "REVOPS"
service = "mauntic-revops"
